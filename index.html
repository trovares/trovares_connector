

<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>trovares_connector Package &#8212; trovares_connector 0.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/bizstyle.css" />
    <link rel="stylesheet" type="text/css" href="_static/trovares.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="trovares_connector.Neo4jConnector" href="trovares_connector.Neo4jConnector.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="trovares_connector.Neo4jConnector.html" title="trovares_connector.Neo4jConnector"
             accesskey="N">next</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">trovares_connector 0.1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">trovares_connector Package</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="toctree-wrapper compound">
</div>
<section id="trovares-connector-package">
<h1>trovares_connector Package<a class="headerlink" href="#trovares-connector-package" title="Permalink to this heading">¶</a></h1>
<p>This package is for connecting the Trovares xGT graph analytics engine with the Neo4j graph database.</p>
<p>The <a class="reference external" href="http://github.com/trovares/trovares_connector/">source code</a> is available on github.</p>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://pypi.org/project/neo4j/">Neo4j Python package</a></p></li>
<li><p><a class="reference external" href="https://pypi.org/project/xgt/">xGT Python package</a></p></li>
<li><p><a class="reference external" href="https://pypi.org/project/pyarrow/">Pyarrow package</a></p></li>
</ul>
<p>These can be installed through pip:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m pip install xgt neo4j pyarrow
</pre></div>
</div>
</section>
<section id="optional">
<h2>Optional<a class="headerlink" href="#optional" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><dl class="simple">
<dt><a class="reference external" href="https://github.com/neo4j-contrib/neo4j-apoc-procedures">APOC</a></dt><dd><p>Improves schema querying.
Automatically used if installed as a plugin for Neo4j.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference external" href="https://pypi.org/project/py2neo/">Py2neo Python package</a></dt><dd><p>Alternative Neo4j driver that provides http or bolt connections.
Transfers are 2X faster, but the memory requirements can be excessive for large transfers.
This can be selected via the driver parameter in the Trovares Neo4jDriver class.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference external" href="https://github.com/neo4j-field/neo4j-arrow">Neo4j-arrow plugin and Python package</a></dt><dd><p>Alternative driver for transfers that is very experimental.
This requires GDS and the jar plugin found in the above link to be installed as part of Neo4j.
In addition it requires the neo4j-arrow python package found in the above link.
At the moment, this provides very fast transfer speeds, but is limited to only int and string data types (Nulls do not work for these types).
This can be selected via the driver parameter in the Trovares Neo4jDriver class.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h2>
<p>You can install this python package by executing this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m pip install trovares_connector
</pre></div>
</div>
</section>
<section id="using-the-trovares-connector">
<h2>Using the trovares_connector<a class="headerlink" href="#using-the-trovares-connector" title="Permalink to this heading">¶</a></h2>
<p>From any Python environment, simply importing both <cite>xgt</cite> and <cite>trovares_connector</cite> is all that is needed to operate this connector.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xgt</span>
<span class="kn">from</span> <span class="nn">trovares_connector</span> <span class="kn">import</span> <span class="n">Neo4jConnector</span>
</pre></div>
</div>
</section>
</section>
<section id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h1>
<p>These examples show typical usage patterns.</p>
<section id="copy-entire-graph-from-neo4j-to-trovares-xgt">
<h2>Copy entire graph from Neo4j to Trovares xGT<a class="headerlink" href="#copy-entire-graph-from-neo4j-to-trovares-xgt" title="Permalink to this heading">¶</a></h2>
<p>This example uses two properties of the connector object that return a list of all of the node labels (vertex types) and all of the relationship types (edge types) in the Neo4j data.
All of these data frames are created in Trovares xGT and then all of the data is copied from Neo4j to xGT.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xgt</span>
<span class="kn">from</span> <span class="nn">trovares_connector</span> <span class="kn">import</span> <span class="n">Neo4jConnector</span><span class="p">,</span> <span class="n">Neo4jDriver</span>

<span class="n">xgt_server</span> <span class="o">=</span> <span class="n">xgt</span><span class="o">.</span><span class="n">Connection</span><span class="p">()</span>
<span class="n">xgt_server</span><span class="o">.</span><span class="n">set_default_namespace</span><span class="p">(</span><span class="s1">&#39;neo4j&#39;</span><span class="p">)</span>
<span class="n">neo4j_server</span> <span class="o">=</span> <span class="n">Neo4jDriver</span><span class="p">(</span><span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;neo4j&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">))</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">Neo4jConnector</span><span class="p">(</span><span class="n">xgt_server</span><span class="p">,</span> <span class="n">neo4j_server</span><span class="p">)</span>

<span class="n">conn</span><span class="o">.</span><span class="n">transfer_to_xgt</span><span class="p">(</span><span class="n">vertices</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">neo4j_node_labels</span><span class="p">,</span>
                     <span class="n">edges</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">neo4j_relationship_types</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="copy-a-portion-of-a-graph-based-on-node-labels-and-or-relationship-types">
<h2>Copy a portion of a graph based on node labels and/or relationship types<a class="headerlink" href="#copy-a-portion-of-a-graph-based-on-node-labels-and-or-relationship-types" title="Permalink to this heading">¶</a></h2>
<p>In this example, only some of the node labels (vertex types) and some of the relationship types (edge types) are copied into Trovares xGT.
Using this idiom requires knowing some schema information about the graph data stored in Neo4j.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xgt</span>
<span class="kn">from</span> <span class="nn">trovares_connector</span> <span class="kn">import</span> <span class="n">Neo4jConnector</span><span class="p">,</span> <span class="n">Neo4jDriver</span>

<span class="n">xgt_server</span> <span class="o">=</span> <span class="n">xgt</span><span class="o">.</span><span class="n">Connection</span><span class="p">()</span>
<span class="n">xgt_server</span><span class="o">.</span><span class="n">set_default_namespace</span><span class="p">(</span><span class="s1">&#39;neo4j&#39;</span><span class="p">)</span>
<span class="n">neo4j_server</span> <span class="o">=</span> <span class="n">Neo4jDriver</span><span class="p">(</span><span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;neo4j&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">))</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">Neo4jConnector</span><span class="p">(</span><span class="n">xgt_server</span><span class="p">,</span> <span class="n">neo4j_server</span><span class="p">)</span>

<span class="n">nodes_to_copy</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Person&#39;</span><span class="p">]</span>
<span class="n">edges_to_copy</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;KNOWS&#39;</span><span class="p">]</span>
<span class="n">conn</span><span class="o">.</span><span class="n">transfer_to_xgt</span><span class="p">(</span><span class="n">vertices</span><span class="o">=</span><span class="n">nodes_to_copy</span><span class="p">,</span> <span class="n">edges</span><span class="o">=</span><span class="n">edges_to_copy</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="using-with-the-neo4j-neo4jdriver">
<h2>Using with the neo4j.Neo4jDriver<a class="headerlink" href="#using-with-the-neo4j-neo4jdriver" title="Permalink to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xgt</span>
<span class="kn">from</span> <span class="nn">trovares_connector</span> <span class="kn">import</span> <span class="n">Neo4jConnector</span>
<span class="kn">from</span> <span class="nn">neo4j</span> <span class="kn">import</span> <span class="n">GraphDatabase</span>

<span class="n">xgt_server</span> <span class="o">=</span> <span class="n">xgt</span><span class="o">.</span><span class="n">Connection</span><span class="p">()</span>
<span class="n">xgt_server</span><span class="o">.</span><span class="n">set_default_namespace</span><span class="p">(</span><span class="s1">&#39;neo4j&#39;</span><span class="p">)</span>
<span class="n">neo4j_driver</span> <span class="o">=</span> <span class="n">GraphDatabase</span><span class="o">.</span><span class="n">driver</span><span class="p">(</span><span class="s2">&quot;bolt://localhost&quot;</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;neo4j&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">))</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">Neo4jConnector</span><span class="p">(</span><span class="n">xgt_server</span><span class="p">,</span> <span class="n">neo4j_driver</span><span class="p">)</span>
<span class="n">different_database_conn</span> <span class="o">=</span> <span class="n">Neo4jConnector</span><span class="p">(</span><span class="n">xgt_server</span><span class="p">,</span> <span class="p">(</span><span class="n">neo4j_driver</span><span class="p">,</span> <span class="s2">&quot;my_database&quot;</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="additional-examples">
<h2>Additional Examples<a class="headerlink" href="#additional-examples" title="Permalink to this heading">¶</a></h2>
<p>More detailed examples can be found here:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/trovares/trovares_connector/tree/main/examples">Python Examples</a></p></li>
<li><p><a class="reference external" href="https://github.com/trovares/trovares_connector/tree/main/jupyter">Jupyter Notebooks</a></p></li>
</ul>
</section>
</section>
<section id="limitations">
<h1>Limitations<a class="headerlink" href="#limitations" title="Permalink to this heading">¶</a></h1>
<p>Doesn’t support the following:</p>
<ul class="simple">
<li><p>Multiple types for a single property.</p></li>
<li><p>Point data type.</p></li>
<li><p>Simple lists as properties.</p></li>
</ul>
<p>Other limitations:</p>
<ul class="simple">
<li><p>Duration data type is converted into an integer representing nanoseconds.</p></li>
<li><p>Multiple labels on a single node will translate into multiple nodes in xGT.</p></li>
<li><p>Multiple node types for a single relationship type will translate the single relationship into multiple distinct relationship types.
See below for more details.</p></li>
</ul>
<section id="single-relationship-with-multiple-node-conversion">
<h2>Single relationship with multiple node conversion<a class="headerlink" href="#single-relationship-with-multiple-node-conversion" title="Permalink to this heading">¶</a></h2>
<p>xGT is schema based and requires an edge to have distinct types.
Neo4j is schema-less so can have multiple node types per edge type.
In the case where the are multiple node types for single edge type, the connector will convert the single edge type in Neo4j into multiple edge types in xGT.
xGT will take the original edge type and create edge types in the format: source_label + _ + edge_label + _ target_label.
This only occurs for these cases.</p>
<p>An example would be the following schema in Neo4j:</p>
<div class="highlight-cypher notranslate"><div class="highlight"><pre><span></span><span class="p">(:</span><span class="n">A</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">PART_OF</span><span class="o">]-&gt;</span><span class="p">(:</span><span class="n">B</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">PART_OF</span><span class="o">]-&gt;</span><span class="p">(:</span><span class="n">C</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">PART_OF</span><span class="o">]-&gt;</span><span class="p">(:</span><span class="n">D</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Would get converted to the following when transferring to xGT:</p>
<div class="highlight-cypher notranslate"><div class="highlight"><pre><span></span><span class="p">(:</span><span class="n">A</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">A_PART_OF_B</span><span class="o">]-&gt;</span><span class="p">(:</span><span class="n">B</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">B_PART_OF_C</span><span class="o">]-&gt;</span><span class="p">(:</span><span class="n">C</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">C_PART_OF_D</span><span class="o">]-&gt;</span><span class="p">(:</span><span class="n">D</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>In addition, multiple labels on a single node will cause a similar behavior:</p>
<div class="highlight-cypher notranslate"><div class="highlight"><pre><span></span><span class="p">(:</span><span class="n">A</span><span class="p">:</span><span class="n">B</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">PART_OF</span><span class="o">]-&gt;</span><span class="p">(:</span><span class="n">C</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Would get converted to the following when transferring to xGT:</p>
<div class="highlight-cypher notranslate"><div class="highlight"><pre><span></span><span class="p">(:</span><span class="n">A</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">A_PART_OF_C</span><span class="o">]-&gt;</span><span class="p">(:</span><span class="n">C</span><span class="p">),</span><span class="w"> </span><span class="p">(:</span><span class="n">B</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">B_PART_OF_C</span><span class="o">]-&gt;</span><span class="p">(:</span><span class="n">C</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="api-details">
<h1>API Details<a class="headerlink" href="#api-details" title="Permalink to this heading">¶</a></h1>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="trovares_connector.Neo4jConnector.html#trovares_connector.Neo4jConnector" title="trovares_connector.Neo4jConnector"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Neo4jConnector</span></code></a>(xgt_server, neo4j_driver[, ...])</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="#">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">trovares_connector Package</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#optional">Optional</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#using-the-trovares-connector">Using the trovares_connector</a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#copy-entire-graph-from-neo4j-to-trovares-xgt">Copy entire graph from Neo4j to Trovares xGT</a></li>
<li><a class="reference internal" href="#copy-a-portion-of-a-graph-based-on-node-labels-and-or-relationship-types">Copy a portion of a graph based on node labels and/or relationship types</a></li>
<li><a class="reference internal" href="#using-with-the-neo4j-neo4jdriver">Using with the neo4j.Neo4jDriver</a></li>
<li><a class="reference internal" href="#additional-examples">Additional Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#limitations">Limitations</a><ul>
<li><a class="reference internal" href="#single-relationship-with-multiple-node-conversion">Single relationship with multiple node conversion</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api-details">API Details</a></li>
</ul>

  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="trovares_connector.Neo4jConnector.html"
                          title="next chapter">trovares_connector.Neo4jConnector</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="trovares_connector.Neo4jConnector.html" title="trovares_connector.Neo4jConnector"
             >next</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">trovares_connector 0.1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">trovares_connector Package</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Trovares, Inc..
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.0.1.
    </div>
  </body>
</html>